# The Idea of Backlink Checker 
It's a casual task to work with backlinks in SEO. There are several tools to check or search for backlinks. Unlike other tools, we do not scan all possible websites in Internet and does not analyze Google Search results in order to find backlinks to your website. We only validate a list of backlinks that you already know. You receive a list of backlinks using one of the following ways:

- you buy backlinks and receive the list of donor web pages
- you generate the backlinks yourself by posting on forums, 3rd party websites, etc.
- your SEO expert or company work for you and show you the reports with backlinks as one of the SEO strategies

When you have such list of donor web pages, you need to confirm that they actually contain the required backlink to your website. Besides, you need to validate this list regularly in the future to monitor if the backlinks still exist and are not being deleted. So, this package will help you to do that. It allows to check for a fixed backlink, such as `https://example.com` and use search patterns, such as `*.example.com` and many others using [regular expressions](https://en.wikipedia.org/wiki/Regular_expression).     

# Browser Scraping Modes
## Simple
Simple mode does not support JavaScript, it requires minimal dependencies, works fast, available on shared hosting, but it works only for simple or static HTML, for example, generated by Joomla, WordPress or Drupal. It will not find backlinks on websites that require JavaScript-enabled browser, for example, websites made with Laravel, Yii, React, etc.

## Chromium (JavaScript enabled)
We use [Chromium headless mode](https://developers.google.com/web/updates/2017/04/headless-chrome) for JavaScript-enabled browsing. This approach allows to pase any website and this is the recommended mode, but it uses more resources on the server and requires a little bit more time to configure the server.

# How to Install

### Step 1. Add the Package via Composer
You must have a [Composer](https://getcomposer.org/) installed. Run the following command:

```bash
php composer require rvalitov/backlink-checker-php:~1.0.0
```

### Step 2. Install the Chromium
**Note:** You can skip this step if you don't need the Chromium mode.

You need to install the following packages first, to make the Chromium work.

**For Debian/Ubuntu:**

```bash
apt-get update
apt-get install gconf-service libasound2 libatk1.0-0 libc6 libcairo2 libcups2 libdbus-1-3 libexpat1 libfontconfig1 libgcc1 libgconf-2-4 libgdk-pixbuf2.0-0 libglib2.0-0 libgtk-3-0 libnspr4 libpango-1.0-0 libpangocairo-1.0-0 libstdc++6 libx11-6 libx11-xcb1 libxcb1 libxcomposite1 libxcursor1 libxdamage1 libxext6 libxfixes3 libxi6 libxrandr2 libxrender1 libxss1 libxtst6 ca-certificates fonts-liberation libappindicator1 libnss3 lsb-release xdg-utils wget
```

You must have a [Node.Js](https://nodejs.org/) installed. If it's not installed, install it using the official manual. Then run the following command to install the Chromium:

```bash
npm install
``` 

### Step 3. Use the Autoload
Include the `autoload.php` in your source PHP file, for example:

```php
<?php
require __DIR__ . '/vendor/autoload.php';
```

# How to Use
First, include the dependencies: 

```php
<?php
require __DIR__ . "/vendor/autoload.php";

use Valitov\BacklinkChecker;
```

Then decide which mode to use, for Chromium mode use:

```php
$checker = new BacklinkChecker\ChromeBacklinkChecker();
```

Or if you want a simple mode without JavaScript support use:

```php
$checker = new BacklinkChecker\SimpleBacklinkChecker();
```

Make a scan of desired URL with desired pattern (use the [PCRE pattern syntax](http://php.net/manual/en/reference.pcre.pattern.syntax.php)):

```php
$url = "https://example.com";
$pattern = "@https?://(www\.)?mywebsite\.com.*@";
$scanBacklinks = true;
$scanHotlinks = false;
$makeScreenshot = true;

try {
    $result = $checker->getBacklinks($url, $pattern, $scanBacklinks, $scanHotlinks, $makeScreenshot);
} catch (RuntimeException $e) {
    die("Error: " . $e->getMessage());
}
```

The function `getBacklinks` has the following additional options:

- `$scanBacklinks` - if set to `true`, then it scans for the backlinks (the text of the `href` attribute of [`<a>`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a) tag); otherwise scanning is not performed. 
- `$scanHotlinks` - if set to `true`, then it scans for the [hotlinking](https://simple.wikipedia.org/wiki/Hotlinking) (the text of the `src` attribute of [`<img>`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img) tag); otherwise scanning is not performed.
- `$makeScreenshot` - if set to `true`, then we also take a screenshot of the viewport; otherwise screenshot is not made. This option makes sense only for Chromium mode (default viewport size is `800 x 600` px, image format: `JPEG`, image quality: `90`, image encoding: `binary`); for simple mode this option is ignored.

Now we should check the `$result`, if the function succeeded:

```php 
$response = $result->getResponse();
if ($response->getSuccess()) {
    $links = $result->getBacklinks();
    if (sizeof($links) > 0)
        //Backlinks found
    else {
        //No backlinks found
    }
} else {
    //Error, usually network error, or server error
    die("Error, HTTP Code " . $response->getStatusCode());
}
```

The function `$result->getBacklinks()` returns an array of objects that describe the backlink. Each object supports the following functions:

- `getBacklink` returns `string`, a backlink - an exact URL that matches the target domain;
- `getTag` returns `string`, the tag that is used for the backlink, can be `a` or `img`;
- `getTarget` returns `string`, contents of [`target`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/A#attr-target) attribute of the `href`;
- `getNoFollow` returns `true` if the backlink has [`nofollow`](https://en.wikipedia.org/wiki/Nofollow) attribute;
- `getAnchor` returns `string` - anchor of the link, for example, inner text of `<a>` tag. This text is returned in a plain text format, all HTML tags are stripped.

The `$response` object supports the following functions:

- `getUrl` returns `string`, the URL of that was analyzed
- `getStatusCode` returns `int`, the [HTTP status code](https://en.wikipedia.org/wiki/List_of_HTTP_status_codes), or `0` or `-1` if there was a network error.
- `getScreenshot` returns `string`, the screenshot in binary format. If the screenshot was not taken or is not available, then the string is empty. If you want to display this screenshot as an image on a web page, then you should first save it to disk and use a link to it, or encode it into [base64](https://en.wikipedia.org/wiki/Data_URI_scheme) and insert into the web page directly. In this case you can use a function like:

```php
$base64_image = "data:image/jpeg;base64," . base64_encode($response->getScreenshot());
```

**Note**. If you use function [`json_encode`](http://php.net/manual/en/function.json-encode.php) on object that contains the screenshot, then this screenshot will be converted to [base64](https://en.wikipedia.org/wiki/Data_URI_scheme) format automatically.

# Examples
Examples are available in a dedicated project on [GitHub](https://github.com/rvalitov/backlink-checker-php-demo).

# System Requirements
We use dependencies, therefore we need PHP 7.1 and later. 

# Feedback
Your feedback is very appreciated. If you want to see new features in this project, please, post your ideas and feature requests in the [issue tracker](https://github.com/rvalitov/backlink-checker-php/issues).

# Donations
This is a free project that I do in my spare time. If you find it useful, then you can support it by donating some amount of money. This will help to keep the project alive and making it better: develop new features, make new releases, fix bugs, and provide at least some minimal technical support.

You can choose any payment method you prefer:

Your Currency | Payment Method
------------ | -------------
Euro € | [![Card](https://img.shields.io/badge/EURO-Debit/Credit%20Card-6f202b.svg?style=flat)](https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=BJJF3E6DBRYHA) [![PayPal](https://img.shields.io/badge/EURO-PayPal-blue.svg?style=flat)](https://www.paypal.me/valitov/0eur) 
USD $ | [![Card](https://img.shields.io/badge/USD-Debit/Credit%20Card-6f202b.svg?style=flat)](https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=B8VMNU7SEAU8J) [![PayPal](https://img.shields.io/badge/USD-PayPal-blue.svg?style=flat)](https://www.paypal.me/valitov/0usd) 
Russian Ruble ₽ | [![Card](https://img.shields.io/badge/RUB-Debit/Credit%20Card-6f202b.svg?style=flat)](https://money.yandex.ru/to/410011424143476) [![PayPal](https://img.shields.io/badge/RUB-PayPal-blue.svg?style=flat)](https://www.paypal.me/valitov/0rub) [![YandexMoney](https://img.shields.io/badge/RUB-YandexMoney-5b0d56.svg?style=flat)](https://money.yandex.ru/to/410011424143476)
Other | [![Card](https://img.shields.io/badge/OTHER-Debit/Credit%20Card-6f202b.svg?style=flat)](https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=BJJF3E6DBRYHA) [![PayPal](https://img.shields.io/badge/OTHER-PayPal-blue.svg?style=flat)](https://www.paypal.me/valitov)

# Support or Contact
Having trouble? May be something has already been reported in the [issue tracker](https://github.com/rvalitov/backlink-checker-php/issues). If you don't find your problem there, then, please, add your issue there.
